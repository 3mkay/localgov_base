.form-item,
.facet-item,
.form-item-webform-terms-of-service {
  position: relative;
  margin-bottom: var(--spacing);
}

fieldset,
.fieldgroup {
  padding: var(--spacing);
  border: var(--border);
  border-color: var(--fieldset-border-color);
}

legend {
  padding: 0 var(--spacing);
  font-weight: bold;
}

label,
.webform-element--title-inline > label {
  display: block;
  margin-bottom: 0rem;
}

input[disabled] {
  opacity: 0.5;
}

.js input.form-autocomplete {
  background-position: calc(100% - 1rem) center;
}

input[type="date"],
input[type="datetime-local"],
input[type="email"],
input[type="number"],
input[type="password"],
input[type="search"],
input[type="tel"],
input[type="text"],
textarea,
select,
.select2-container--default .select2-search--dropdown .select2-search__field {
  width: 100%;
  padding: var(--input-padding-vertical) var(--input-padding-horizontal);
  font-size: var(--font-size-medium);
  border: var(--border);
  border-color: var(--input-border-color);
  background-color: var(--input-bg-color);
}

.select2-container--default .select2-selection--single {
  border-radius: 0;
  padding: 1.5rem;
  display: flex;
  align-items: center;
}

.select2-container--default .select2-search--dropdown .select2-search__field {
  margin: 0.5rem;
}

.select2-results__option {
  padding: 0.5rem 1rem;
}
.select2-container .select2-selection--single .select2-selection__rendered {
  padding-left: 0;
}

/* Buttons */
button,
input[type="submit"] {
  padding: var(--button-padding-vertical) var(--button-padding-horizontal)
    var(--button-padding-vertical) var(--button-padding-horizontal);
  cursor: pointer;
  color: var(--button-text-color);
  border: var(--border);
  border-color: var(--button-border-color);
  border-radius: var(--button-border-radius);
  background-color: var(--button-bg-color);
  font-family: var(--button-font-family);
}

button:focus,
button:hover,
input[type="submit"]:focus,
input[type="submit"]:hover {
  text-decoration: underline;
  color: var(--button-text-color-hover);
  background-color: var(--button-bg-color-hover);
}

/*
  Checkboxes

  This checkboxes styling is amended CSS from the gov.uk design system:
    - https://design-system.service.gov.uk/components/checkboxes/

  We are adding a .form-checkboxes class around each of these here to make sure
  this only affects checkboxes created by Drupal. If we don't, the position absolute
  can have very unwanted effects.

  If you need to create custom checkboxes, make sure you have the same class
  wrapping them.
*/

.form-checkboxes input[type="checkbox"],
.facet-item input[type="checkbox"],
.form-item-webform-terms-of-service input[type="checkbox"] {
  position: absolute;
  z-index: 1;
  top: -2px;
  left: -2px;
  width: 44px;
  height: 44px;
  margin: 0;
  cursor: pointer;
  opacity: 0;
}

.form-checkboxes input[type="checkbox"] + label,
.facet-item input[type="checkbox"] + label,
.form-item-webform-terms-of-service input[type="checkbox"] + label {
  display: inline-block;
  margin-left: 40px;
  padding: 8px 15px 5px;
  cursor: pointer;
  touch-action: manipulation;
}

.form-checkboxes input[type="checkbox"] + label::before,
.facet-item input[type="checkbox"] + label::before,
.form-item-webform-terms-of-service input[type="checkbox"] + label::before {
  position: absolute;
  top: 0;
  left: 0;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  content: "";
  border: 2px solid var(--checkbox-select-outline-color);
  background: transparent;
}
.form-checkboxes input[type="checkbox"] + label::after,
.facet-item input[type="checkbox"] + label::after,
.form-item-webform-terms-of-service input[type="checkbox"] + label::after {
  position: absolute;
  top: 11px;
  left: 9px;
  box-sizing: border-box;
  width: 23px;
  height: 12px;
  content: "";
  transform: rotate(-45deg);
  opacity: 0;
  border: solid;
  border-width: 0 0 5px 5px;
  border-top-color: transparent;
  background: transparent;
}

.form-checkboxes input[type="checkbox"]:focus + label:before,
.facet-item input[type="checkbox"]:focus + label:before,
.form-item-webform-terms-of-service input[type="checkbox"]:focus + label:before {
  border-width: 4px;
  box-shadow: 0 0 0 3px var(--checkbox-select-focus-color);
}

.form-checkboxes input[type="checkbox"]:hover + label,
.facet-item input[type="checkbox"]:hover + label,
.form-item-webform-terms-of-service input[type="checkbox"]:hover + label,
.form-checkboxes input[type="checkbox"]:focus + label,
.facet-item input[type="checkbox"]:focus + label,
.form-item-webform-terms-of-service input[type="checkbox"]:focus + label {
  text-decoration: underline;
}

.form-checkboxes input[type="checkbox"]:checked + label:after,
.facet-item input[type="checkbox"]:checked + label:after,
.form-item-webform-terms-of-service
  input[type="checkbox"]:checked
  + label:after {
  opacity: 1;
}

/* Radio Buttons 
  This radio styling is amended CSS from the gov.uk design system:
  - https://design-system.service.gov.uk/components/radios/

  We are adding a .form-radios class around each of these here to make sure
  this only affects radios created by Drupal. If we don't, the position absolute
  can have very unwanted effects.

  If you need to create custom radios, make sure you have the same class
  wrapping them.
*/

.form-item-radios {
  display: block;
  position: relative;
  padding: 0 0 0 38px;
  margin-bottom: 10px;
}
.form-item-radios input {
  position: absolute;
  cursor: pointer;
  left: 0;
  top: 0;
  width: 38px;
  height: 38px;
  z-index: 1;
  margin: 0;
  filter: alpha(opacity=0);
  opacity: 0;
}
.form-item-radios label {
  cursor: pointer;
  padding: 8px 10px 9px 12px;
  display: block;
  touch-action: manipulation;
}
.form-item-radios [type="radio"] + label::before {
  content: "";
  border: 2px solid var(--radio-select-outline-color);
  background: transparent;
  width: 34px;
  height: 34px;
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 50%;
}
.form-item-radios [type="radio"] + label::after {
  content: "";
  border: 10px solid;
  width: 0;
  height: 0;
  position: absolute;
  top: 9px;
  left: 9px;
  border-radius: 50%;
  filter: alpha(opacity=0);
  opacity: 0;
}
.form-item-radios [type="radio"]:focus + label::before {
  box-shadow: 0 0 0 4px var(--radio-select-focus-color);
}
.form-item-radios input:checked + label::after {
  filter: alpha(opacity=100);
  opacity: 1;
}
.form-item-radios:last-child,
.form-item-radios:last-of-type {
  margin-bottom: 0;
}

/* Description Field - needs to come before the file upload description items */
.form-item .description {
  padding: 1rem;
  border: var(--form-item-description-border);
  background-color: var(--form-item-description-bg-color);
}
.form-item input + .description {
  border-top: 0;
}
.form-item .description + input {
  border-top: 0;
}

.form-item .description .webform-element-more--content {
  padding: 1rem;
}

/* 
  This is just in case we have a description field in a fieldset that contains 
  checkboxes or radios. It stops the first item from hitting the bottom of the
  description.
*/
.fieldset-wrapper > .field-prefix + .form-checkboxes,
.fieldset-wrapper > .field-prefix + .form-item-radios {
  margin-top: var(--spacing);
}

/* File Upload */
input[type="file"],
.form-item-managed-file-button .webform-file-button {
  display: inline-block;
  margin: 0;
  padding: 1rem;
  border: var(--file-upload-border);
  border-left-width: var(--file-upload-border-left-size);
  border-color: var(--file-upload-border-color);
  cursor: pointer;
}
input[type="file"]:focus,
input[type="file"]:hover,
.form-item-managed-file-button .webform-file-button:focus,
.form-item-managed-file-button .webform-file-button:focus,
.form-managed-file:focus-within .webform-file-button,
.form-managed-file .webform-file-button:hover {
  font-weight: bold; /* Because text-decoration doesn't work on input[type]"file"] */
  text-decoration: underline;
  background-color: var(--file-upload-bg-hover-color);
  color: var(--file-upload-text-hover-color);
}
.form-item-managed-file .description,
.form-item-managed-file-multiple .description,
.form-item-managed-file-button .description {
  position: relative;
  top: -1px;
  width: auto;
  max-width: 768px;
  border: var(--file-upload-border);
  border-left-width: var(--file-upload-border-left-size);
  border-color: var(--file-upload-border-color);
}
.form-item-managed-file .description br,
.form-item-managed-file-multiple .description br,
.form-item-managed-file-button .description br {
  margin-bottom: var(--spacing);
}